<div class="max-w-4xl mx-auto p-6 bg-white shadow-lg rounded-lg">
    <h2 class="text-2xl font-bold text-gray-800 mb-4">Energy Consumption Overview</h2>
  
    <!-- Loading & Error Handling -->
    <div class="flex justify-end mb-4 gap-2">
      <button (click)="downloadCSV()" 
        class="px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-600 flex items-center">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
        </svg>
        Download CSV
      </button>
      
      <button (click)="downloadPDF()" 
        class="px-4 py-2 bg-red-500 text-white rounded hover:bg-red-600 flex items-center">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
        </svg>
        Download PDF
      </button>

      <button (click)="downloadAllPagesCSV()" 
    class="px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600 flex items-center">
    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
    </svg>
    Download All Pages CSV
  </button>
  
  <button (click)="downloadAllPagesPDF()" 
    class="px-4 py-2 bg-purple-500 text-white rounded hover:bg-purple-600 flex items-center">
    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
    </svg>
    Download All Pages PDF
  </button>
    </div>
  <!-- All Energy Summaries -->
<div *ngIf="allSummaries$ | async as summaries" class="mt-6">
  <h3 class="text-xl font-semibold text-gray-700 mb-2">All Energy Summaries</h3>
  <div class="overflow-x-auto">
    <table class="min-w-full border border-gray-300 bg-white shadow-md rounded-lg">
      <thead>
        <tr class="bg-gray-200 text-gray-700">
          <th class="py-2 px-4 border">Device name</th>
          <th class="py-2 px-4 border">Date</th>
          <th class="py-2 px-4 border">Energy Consumption (kWh)</th>
          <th class="py-2 px-4 border">Alert Count</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let item of summaries" class="hover:bg-gray-100">
          <td class="py-2 px-4 border">{{ item.device?.name }}</td>
          <td class="py-2 px-4 border">{{ item.date }}</td>
          <td class="py-2 px-4 border">{{ item.totalEnergyConsumption }}</td>
          <td class="py-2 px-4 border">{{ item.alertCount }}</td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Pagination Controls -->
  <div class="flex flex-col items-center" *ngIf="totalPages$ | async as totalPages">
   
  
    <!-- Buttons -->
    <div class="inline-flex mt-2 xs:mt-0">
        <button (click)="prevPage()" [disabled]="page === 0"
          class="flex items-center justify-center px-4 h-10 text-base font-medium text-white bg-emerald-500 rounded-s 
                 hover:bg-emerald-600 disabled:opacity-50">
            Prev
        </button>
        
        <button (click)="nextPage()" [disabled]="page === totalPages - 1"
          class="flex items-center justify-center px-4 h-10 text-base font-medium text-white bg-emerald-500 border-0 
                 border-s border-emerald-600 rounded-e hover:bg-emerald-700 disabled:opacity-50">
            Next
        </button>
    </div> 
    <!-- Help text -->
    <span class="text-sm text-gray-700">
        Showing 
        <span class="font-semibold text-gray-900 ">{{ getStartIndex() + 1 }}</span> 
        to 
        <span class="font-semibold text-gray-900 ">{{ getEndIndex() }}</span> 
        of 
        <span class="font-semibold text-gray-900 ">{{ totalEntries }}</span> Entries
    </span>
  </div>
  

</div>

  </div>
  